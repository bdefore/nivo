!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("@nivo/core"),require("@nivo/axes"),require("@nivo/legends"),require("@nivo/colors"),require("@nivo/scales"),require("@nivo/annotations"),require("lodash/get"),require("lodash/isString"),require("lodash/isNumber"),require("lodash/isPlainObject"),require("d3-scale"),require("@react-spring/web"),require("react/jsx-runtime"),require("@nivo/tooltip"),require("@nivo/voronoi")):"function"==typeof define&&define.amd?define(["exports","react","@nivo/core","@nivo/axes","@nivo/legends","@nivo/colors","@nivo/scales","@nivo/annotations","lodash/get","lodash/isString","lodash/isNumber","lodash/isPlainObject","d3-scale","@react-spring/web","react/jsx-runtime","@nivo/tooltip","@nivo/voronoi"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).nivo=e.nivo||{},e.React,e.nivo,e.nivo,e.nivo,e.nivo,e.nivo,e.nivo,e["lodash/get"],e["lodash/isString"],e["lodash/isNumber"],e["lodash/isPlainObject"],e.d3,e["@react-spring/web"],e["react/jsx-runtime"],e.nivo,e.nivo)}(this,(function(e,n,o,i,t,r,a,s,l,d,u,c,v,h,f,m,g){"use strict";function x(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=x(l),y=x(d),b=x(u),M=x(c);function S(){return S=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},S.apply(this,arguments)}function C(e,n){if(null==e)return{};var o,i,t={},r=Object.keys(e);for(i=0;i<r.length;i++)o=r[i],n.indexOf(o)>=0||(t[o]=e[o]);return t}var w=function(e){if("function"==typeof e)return e;if(b.default(e))return function(){return e};if(function(e){return M.default(e)}(e)){if(!y.default(e.key))throw new Error("symbolSize is invalid, key should be a string pointing to the property to use to determine node size");if(!Array.isArray(e.values)||2!==e.values.length)throw new Error("symbolSize is invalid, values spec should be an array containing two values, min and max");if(!Array.isArray(e.sizes)||2!==e.sizes.length)throw new Error("symbolSize is invalid, sizes spec should be an array containing two values, min and max");var n=v.scaleLinear().domain([e.values[0],e.values[1]]).range([e.sizes[0],e.sizes[1]]);return function(o){return n(p.default(o,e.key))}}throw new Error("nodeSize is invalid, it should be either a function, a number or an object")},k=function(e){var i,t=e.data,s=e.xScaleSpec,l=e.xFormat,d=e.yScaleSpec,u=e.yFormat,c=e.width,v=e.height,h=e.nodeId,f=e.nodeSize,m=e.colors,g=n.useMemo((function(){return a.computeXYScalesForSeries(t,s,d,c,v)}),[t,s,d,c,v]),x=g.series,p=g.xScale,y=g.yScale,b=o.useValueFormatter(l),M=o.useValueFormatter(u),C=o.usePropertyAccessor(h),k=n.useMemo((function(){return function(e){var n=e.series,o=e.formatX,i=e.formatY,t=e.getNodeId,r=[];return n.forEach((function(e){e.data.forEach((function(n,a){var s={index:r.length,serieIndex:a,serieId:e.id,x:n.position.x,xValue:n.data.x,formattedX:o(n.data.x),y:n.position.y,yValue:n.data.y,formattedY:i(n.data.y),data:n.data};r.push(S({},s,{id:t(s)}))}))})),r}({series:x,formatX:b,formatY:M,getNodeId:C})}),[x,b,M,C]),I=(i=f,n.useMemo((function(){return w(i)}),[i])),j=r.useOrdinalColorScale(m,"serieId");return{xScale:p,yScale:y,nodes:n.useMemo((function(){return k.map((function(e){return S({},e,{size:I(e),color:j({serieId:e.serieId})})}))}),[k,I,j]),legendData:n.useMemo((function(){return x.map((function(e){return{id:e.id,label:e.id,color:j({serieId:e.id})}}))}),[x,j])}},I=function(e,n){return s.useAnnotations({data:e,annotations:n,getPosition:function(e){return{x:e.x,y:e.y}},getDimensions:function(e){return{size:e.size,width:e.size,height:e.size}}})},j=function(e){return e/2},E={xScale:{type:"linear",min:0,max:"auto"},yScale:{type:"linear",min:0,max:"auto"},enableGridX:!0,enableGridY:!0,axisBottom:{},axisLeft:{},nodeId:function(e){return e.serieId+"."+e.index},nodeSize:9,nodeComponent:function(e){var o=e.node,i=e.style,t=e.blendMode,r=e.isInteractive,a=e.onMouseEnter,s=e.onMouseMove,l=e.onMouseLeave,d=e.onClick,u=n.useCallback((function(e){return null==a?void 0:a(o,e)}),[o,a]),c=n.useCallback((function(e){return null==s?void 0:s(o,e)}),[o,s]),v=n.useCallback((function(e){return null==l?void 0:l(o,e)}),[o,l]),m=n.useCallback((function(e){return null==d?void 0:d(o,e)}),[o,d]);return f.jsx(h.animated.circle,{cx:i.x,cy:i.y,r:i.size.to(j),fill:i.color,style:{mixBlendMode:t},onMouseEnter:r?u:void 0,onMouseMove:r?c:void 0,onMouseLeave:r?v:void 0,onClick:r?m:void 0})},colors:{scheme:"nivo"},isInteractive:!0,debugMesh:!1,tooltip:function(e){var n=e.node;return f.jsx(m.BasicTooltip,{id:n.serieId,value:"x: "+n.formattedX+", y: "+n.formattedY,enableChip:!0,color:n.color})},markers:[],legends:[],annotations:[]},z=S({},E,{blendMode:"normal",layers:["grid","axes","nodes","markers","mesh","legends","annotations"],role:"img",useMesh:!0,animate:!0,motionConfig:"default"}),L=S({},E,{layers:["grid","axes","nodes","mesh","legends","annotations"],pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,renderNode:function(e,n){e.beginPath(),e.arc(n.x,n.y,n.size/2,0,2*Math.PI),e.fillStyle=n.color,e.fill()}}),T=function(e){var n=e.nodes,o=e.annotations,i=I(n,o);return f.jsx(f.Fragment,{children:i.map((function(e,n){return f.jsx(s.Annotation,S({},e),n)}))})},W=function(e){return e.id},F=function(e){return{x:e.x,y:e.y,size:e.size,color:e.color}},P=function(e){return{x:e.x,y:e.y,size:0,color:e.color}},q=function(e){var i=e.nodes,t=e.nodeComponent,r=e.isInteractive,a=e.onMouseEnter,s=e.onMouseMove,l=e.onMouseLeave,d=e.onClick,u=e.tooltip,c=e.blendMode,v=o.useMotionConfig(),g=v.animate,x=v.config,p=h.useTransition(i,{keys:W,from:F,enter:F,update:F,leave:P,config:x,immediate:!g}),y=m.useTooltip(),b=y.showTooltipFromEvent,M=y.hideTooltip,S=n.useCallback((function(e,o){b(n.createElement(u,{node:e}),o),null==a||a(e,o)}),[u,b,a]),C=n.useCallback((function(e,o){b(n.createElement(u,{node:e}),o),null==s||s(e,o)}),[u,b,s]),w=n.useCallback((function(e,n){M(),null==l||l(e,n)}),[M,l]),k=n.useCallback((function(e,n){return null==d?void 0:d(e,n)}),[d]);return f.jsx(f.Fragment,{children:p((function(e,o){return n.createElement(t,{node:o,style:e,blendMode:c,isInteractive:r,onMouseEnter:r?S:void 0,onMouseMove:r?C:void 0,onMouseLeave:r?w:void 0,onClick:r?k:void 0})}))})},R=function(e){var o=e.nodes,i=e.width,t=e.height,r=e.onMouseEnter,a=e.onMouseMove,s=e.onMouseLeave,l=e.onClick,d=e.tooltip,u=e.debug,c=m.useTooltip(),v=c.showTooltipFromEvent,h=c.hideTooltip,x=n.useCallback((function(e,o){v(n.createElement(d,{node:e}),o),r&&r(e,o)}),[v,d,r]),p=n.useCallback((function(e,o){v(n.createElement(d,{node:e}),o),a&&a(e,o)}),[v,d,a]),y=n.useCallback((function(e,n){h(),s&&s(e,n)}),[h,s]),b=n.useCallback((function(e,n){l&&l(e,n)}),[l]);return f.jsx(g.Mesh,{nodes:o,width:i,height:t,onMouseEnter:x,onMouseMove:p,onMouseLeave:y,onClick:b,debug:u})},G=["isInteractive","animate","motionConfig","theme","renderWrapper"],V=function(e){var r=e.data,a=e.xScale,s=void 0===a?z.xScale:a,l=e.xFormat,d=e.yScale,u=void 0===d?z.yScale:d,c=e.yFormat,v=e.width,h=e.height,m=e.margin,g=e.layers,x=void 0===g?z.layers:g,p=e.colors,y=void 0===p?z.colors:p,b=e.blendMode,M=void 0===b?z.blendMode:b,C=e.nodeId,w=void 0===C?z.nodeId:C,I=e.nodeSize,j=void 0===I?z.nodeSize:I,E=e.nodeComponent,L=void 0===E?z.nodeComponent:E,W=e.enableGridX,F=void 0===W?z.enableGridX:W,P=e.enableGridY,G=void 0===P?z.enableGridY:P,V=e.gridXValues,B=e.gridYValues,X=e.axisTop,Y=e.axisRight,A=e.axisBottom,D=void 0===A?z.axisBottom:A,H=e.axisLeft,O=void 0===H?z.axisLeft:H,N=e.annotations,_=void 0===N?z.annotations:N,U=e.isInteractive,J=void 0===U?z.isInteractive:U,K=e.useMesh,Q=void 0===K?z.useMesh:K,Z=e.debugMesh,$=void 0===Z?z.debugMesh:Z,ee=e.onMouseEnter,ne=e.onMouseMove,oe=e.onMouseLeave,ie=e.onClick,te=e.tooltip,re=void 0===te?z.tooltip:te,ae=e.markers,se=void 0===ae?z.markers:ae,le=e.legends,de=void 0===le?z.legends:le,ue=e.role,ce=void 0===ue?z.role:ue,ve=e.ariaLabel,he=e.ariaLabelledBy,fe=e.ariaDescribedBy,me=o.useDimensions(v,h,m),ge=me.margin,xe=me.innerWidth,pe=me.innerHeight,ye=me.outerWidth,be=me.outerHeight,Me=k({data:r,xScaleSpec:s,xFormat:l,yScaleSpec:u,yFormat:c,width:xe,height:pe,nodeId:w,nodeSize:j,colors:y}),Se=Me.xScale,Ce=Me.yScale,we=Me.nodes,ke=Me.legendData,Ie=n.useMemo((function(){return{xScale:Se,yScale:Ce,nodes:we,margin:ge,innerWidth:xe,innerHeight:pe,outerWidth:ye,outerHeight:be}}),[Se,Ce,we,ge,xe,pe,ye,be]),je={grid:null,axes:null,nodes:null,markers:null,mesh:null,annotations:null,legends:null};return x.includes("grid")&&(je.grid=f.jsx(i.Grid,{width:xe,height:pe,xScale:F?Se:null,yScale:G?Ce:null,xValues:V,yValues:B},"grid")),x.includes("axes")&&(je.axes=f.jsx(i.Axes,{xScale:Se,yScale:Ce,width:xe,height:pe,top:X,right:Y,bottom:D,left:O},"axes")),x.includes("nodes")&&(je.nodes=f.jsx(q,{nodes:we,nodeComponent:L,isInteractive:J,tooltip:re,blendMode:M,onMouseEnter:ee,onMouseMove:ne,onMouseLeave:oe,onClick:ie},"nodes")),x.includes("markers")&&(je.markers=f.jsx(o.CartesianMarkers,{markers:se,width:xe,height:pe,xScale:Se,yScale:Ce},"markers")),x.includes("mesh")&&J&&Q&&(je.mesh=f.jsx(R,{nodes:we,width:xe,height:pe,onMouseEnter:ee,onMouseMove:ne,onMouseLeave:oe,onClick:ie,tooltip:re,debug:$},"mesh")),x.includes("annotations")&&(je.annotations=f.jsx(T,{nodes:we,annotations:_},"annotations")),x.includes("legends")&&(je.legends=de.map((function(e,n){return f.jsx(t.BoxLegendSvg,S({},e,{containerWidth:xe,containerHeight:pe,data:ke}),n)}))),f.jsx(o.SvgWrapper,{width:ye,height:be,margin:ge,role:ce,ariaLabel:ve,ariaLabelledBy:he,ariaDescribedBy:fe,children:x.map((function(e,o){if("string"==typeof e&&void 0!==je[e])return je[e];if("function"==typeof e)return f.jsx(n.Fragment,{children:n.createElement(e,Ie)},o);throw new Error("Unknown layer ("+e+")")}))})},B=function(e){var n=e.isInteractive,i=void 0===n?z.isInteractive:n,t=e.animate,r=void 0===t?z.animate:t,a=e.motionConfig,s=void 0===a?z.motionConfig:a,l=e.theme,d=e.renderWrapper,u=C(e,G);return f.jsx(o.Container,{animate:r,isInteractive:i,motionConfig:s,renderWrapper:d,theme:l,children:f.jsx(V,S({isInteractive:i},u))})},X=["isInteractive","renderWrapper","theme"],Y=function(e){var r=e.data,a=e.xScale,l=void 0===a?L.xScale:a,d=e.xFormat,u=e.yScale,c=void 0===u?L.yScale:u,v=e.yFormat,h=e.width,x=e.height,p=e.margin,y=e.pixelRatio,b=void 0===y?L.pixelRatio:y,M=e.layers,C=void 0===M?L.layers:M,w=e.colors,j=void 0===w?L.colors:w,E=e.nodeId,T=void 0===E?z.nodeId:E,W=e.nodeSize,F=void 0===W?L.nodeSize:W,P=e.renderNode,q=void 0===P?L.renderNode:P,R=e.enableGridX,G=void 0===R?L.enableGridX:R,V=e.gridXValues,B=e.enableGridY,X=void 0===B?L.enableGridY:B,Y=e.gridYValues,A=e.axisTop,D=e.axisRight,H=e.axisBottom,O=void 0===H?L.axisBottom:H,N=e.axisLeft,_=void 0===N?L.axisLeft:N,U=e.annotations,J=void 0===U?L.annotations:U,K=e.isInteractive,Q=void 0===K?L.isInteractive:K,Z=e.debugMesh,$=void 0===Z?L.debugMesh:Z,ee=e.onMouseEnter,ne=e.onMouseMove,oe=e.onMouseLeave,ie=e.onClick,te=e.tooltip,re=void 0===te?L.tooltip:te,ae=e.legends,se=void 0===ae?L.legends:ae,le=n.useRef(null),de=o.useTheme(),ue=n.useState(null),ce=ue[0],ve=ue[1],he=o.useDimensions(h,x,p),fe=he.margin,me=he.innerWidth,ge=he.innerHeight,xe=he.outerWidth,pe=he.outerHeight,ye=k({data:r,xScaleSpec:l,xFormat:d,yScaleSpec:c,yFormat:v,width:me,height:ge,nodeId:T,nodeSize:F,colors:j}),be=ye.xScale,Me=ye.yScale,Se=ye.nodes,Ce=ye.legendData,we=I(Se,J),ke=g.useVoronoiMesh({points:Se,width:me,height:ge,debug:$}),Ie=ke.delaunay,je=ke.voronoi,Ee=n.useMemo((function(){return{xScale:be,yScale:Me,nodes:Se,margin:fe,innerWidth:me,innerHeight:ge,outerWidth:xe,outerHeight:pe}}),[be,Me,Se,fe,me,ge,xe,pe]);n.useEffect((function(){if(le.current){le.current.width=xe*b,le.current.height=pe*b;var e=le.current.getContext("2d");e.scale(b,b),e.fillStyle=de.background,e.fillRect(0,0,xe,pe),e.translate(fe.left,fe.top),C.forEach((function(n){if("grid"===n)e.lineWidth=de.grid.line.strokeWidth,e.strokeStyle=de.grid.line.stroke,G&&i.renderGridLinesToCanvas(e,{width:me,height:ge,scale:be,axis:"x",values:V}),X&&i.renderGridLinesToCanvas(e,{width:me,height:ge,scale:Me,axis:"y",values:Y});else if("annotations"===n)s.renderAnnotationsToCanvas(e,{annotations:we,theme:de});else if("axes"===n)i.renderAxesToCanvas(e,{xScale:be,yScale:Me,width:me,height:ge,top:A,right:D,bottom:O,left:_,theme:de});else if("nodes"===n)Se.forEach((function(n){q(e,n)}));else if("mesh"===n)$&&(g.renderVoronoiToCanvas(e,je),ce&&g.renderVoronoiCellToCanvas(e,je,ce.index));else if("legends"===n)se.forEach((function(n){t.renderLegendToCanvas(e,S({},n,{data:Ce,containerWidth:me,containerHeight:ge,theme:de}))}));else{if("function"!=typeof n)throw new Error("Invalid layer: "+n);n(e,Ee)}}))}}),[le,me,ge,xe,pe,fe.top,fe.left,b,q,C,Ee,de,be,Me,Se,G,X,A,D,O,_,se,Ce,$,je,ce,we]);var ze=m.useTooltip(),Le=ze.showTooltipFromEvent,Te=ze.hideTooltip,We=n.useCallback((function(e){var n=o.getRelativeCursor(le.current,e),i=n[0],t=n[1];if(!o.isCursorInRect(fe.left,fe.top,me,ge,i,t))return null;var r=Ie.find(i-fe.left,t-fe.top);return Se[r]}),[le,fe,me,ge,Ie]),Fe=n.useCallback((function(e){var o=We(e);ve(o),o?(Le(n.createElement(re,{node:o}),e),ce&&ce.id!==o.id&&(oe&&oe(ce,e),ee&&ee(o,e)),ce||ee&&ee(o,e),ne&&ne(o,e)):(Te(),ce&&oe&&oe(ce,e))}),[We,ce,ve,Le,Te,re,ee,ne,oe]),Pe=n.useCallback((function(e){Te(),ve(null),ce&&oe&&oe(ce,e)}),[Te,ce,ve,oe]),qe=n.useCallback((function(e){if(ie){var n=We(e);n&&ie(n,e)}}),[We,ie]);return f.jsx("canvas",{ref:le,width:xe*b,height:pe*b,style:{width:xe,height:pe,cursor:Q?"auto":"normal"},onMouseEnter:Q?Fe:void 0,onMouseMove:Q?Fe:void 0,onMouseLeave:Q?Pe:void 0,onClick:Q?qe:void 0})},A=function(e){var n=e.isInteractive,i=e.renderWrapper,t=e.theme,r=C(e,X);return f.jsx(o.Container,{isInteractive:n,renderWrapper:i,theme:t,animate:!1,children:f.jsx(Y,S({},r))})};e.ResponsiveScatterPlot=function(e){return f.jsx(o.ResponsiveWrapper,{children:function(n){var o=n.width,i=n.height;return f.jsx(B,S({width:o,height:i},e))}})},e.ResponsiveScatterPlotCanvas=function(e){return f.jsx(o.ResponsiveWrapper,{children:function(n){var o=n.width,i=n.height;return f.jsx(A,S({width:o,height:i},e))}})},e.ScatterPlot=B,e.ScatterPlotCanvas=A,e.canvasDefaultProps=L,e.commonDefaultProps=E,e.svgDefaultProps=z,e.useScatterPlot=k,e.useScatterPlotAnnotations=I,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=nivo-scatterplot.umd.js.map
