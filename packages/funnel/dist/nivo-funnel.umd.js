!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react"),require("@nivo/core"),require("d3-shape"),require("d3-scale"),require("@nivo/colors"),require("@nivo/annotations"),require("@nivo/tooltip"),require("react/jsx-runtime"),require("@react-spring/web")):"function"==typeof define&&define.amd?define(["exports","react","@nivo/core","d3-shape","d3-scale","@nivo/colors","@nivo/annotations","@nivo/tooltip","react/jsx-runtime","@react-spring/web"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).nivo=e.nivo||{},e.React,e.nivo,e.d3,e.d3,e.nivo,e.nivo,e.nivo,e["react/jsx-runtime"],e["@react-spring/web"])}(this,(function(e,r,t,o,n,a,i,s,u,l){"use strict";function p(){return p=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},p.apply(this,arguments)}var d={layers:["separators","parts","labels","annotations"],direction:"vertical",interpolation:"smooth",spacing:0,shapeBlending:.66,colors:{scheme:"nivo"},fillOpacity:1,borderWidth:6,borderColor:{from:"color"},borderOpacity:.66,enableLabel:!0,labelColor:{theme:"background"},enableBeforeSeparators:!0,beforeSeparatorLength:0,beforeSeparatorOffset:0,enableAfterSeparators:!0,afterSeparatorLength:0,afterSeparatorOffset:0,annotations:[],isInteractive:!0,currentPartSizeExtension:0,role:"img",animate:t.MotionConfigProvider.defaultProps.animate,motionConfig:t.MotionConfigProvider.defaultProps.config},c=function(e){var r=e.part;return u.jsx(s.BasicTooltip,{id:r.data.label,value:r.formattedValue,color:r.color,enableChip:!0})},f=function(e,r){var t=o.area();return"vertical"===r?t.curve("smooth"===e?o.curveBasis:o.curveLinear).x0((function(e){return e.x0})).x1((function(e){return e.x1})).y((function(e){return e.y})):t.curve("smooth"===e?o.curveBasis:o.curveLinear).y0((function(e){return e.y0})).y1((function(e){return e.y1})).x((function(e){return e.x})),[t,o.line().defined((function(e){return null!==e})).x((function(e){return e.x})).y((function(e){return e.y})).curve("smooth"===e?o.curveBasis:o.curveLinear)]},h=function(e){var r,t,o=e.data,a=e.direction,i=e.width,s=e.height,u=e.spacing;"vertical"===a?(r=s,t=i):(r=i,t=s);var l=(r-u*(o.length-1))/o.length,p=function(e){return u*e+l*e};p.bandwidth=l;var d=o.map((function(e){return e.value}));return[p,n.scaleLinear().domain([0,Math.max.apply(Math,d)]).range([0,t])]},v=function(e){var r=e.parts,t=e.direction,o=e.width,n=e.height,a=e.spacing,i=e.enableBeforeSeparators,s=e.beforeSeparatorOffset,u=e.enableAfterSeparators,l=e.afterSeparatorOffset,d=[],c=[],f=r[r.length-1];if("vertical"===t){r.forEach((function(e){var r=e.y0-a/2;i&&d.push({partId:e.data.id,x0:0,x1:e.x0-s,y0:r,y1:r}),u&&c.push({partId:e.data.id,x0:e.x1+l,x1:o,y0:r,y1:r})}));var h=f.y1;i&&d.push(p({},d[d.length-1],{partId:"none",y0:h,y1:h})),u&&c.push(p({},c[c.length-1],{partId:"none",y0:h,y1:h}))}else if("horizontal"===t){r.forEach((function(e){var r=e.x0-a/2;d.push({partId:e.data.id,x0:r,x1:r,y0:0,y1:e.y0-s}),c.push({partId:e.data.id,x0:r,x1:r,y0:e.y1+l,y1:n})}));var v=f.x1;d.push(p({},d[d.length-1],{partId:"none",x0:v,x1:v})),c.push(p({},c[c.length-1],{partId:"none",x0:v,x1:v}))}return[d,c]},x=function(e){var t=e.parts,o=e.setCurrentPartId,n=e.isInteractive,a=e.onMouseEnter,i=e.onMouseLeave,s=e.onMouseMove,u=e.onClick,l=e.showTooltipFromEvent,d=e.hideTooltip,f=e.tooltip,h=void 0===f?c:f;return n?t.map((function(e){return p({},e,{onMouseEnter:function(t){o(e.data.id),l(r.createElement(h,{part:e}),t),void 0!==a&&a(e,t)},onMouseLeave:function(r){o(null),d(),void 0!==i&&i(e,r)},onMouseMove:function(t){l(r.createElement(h,{part:e}),t),void 0!==s&&s(e,t)},onClick:void 0!==u?function(r){u(e,r)}:void 0})})):t},y=function(e){var o,n,i=e.data,u=e.width,l=e.height,c=e.direction,y=void 0===c?d.direction:c,b=e.interpolation,m=void 0===b?d.interpolation:b,g=e.spacing,S=void 0===g?d.spacing:g,C=e.shapeBlending,P=void 0===C?d.shapeBlending:C,M=e.valueFormat,O=e.colors,j=void 0===O?d.colors:O,L=e.fillOpacity,I=void 0===L?d.fillOpacity:L,w=e.borderWidth,B=void 0===w?d.borderWidth:w,E=e.borderColor,W=void 0===E?d.borderColor:E,F=e.borderOpacity,G=void 0===F?d.borderOpacity:F,A=e.labelColor,k=void 0===A?d.labelColor:A,T=e.enableBeforeSeparators,q=void 0===T?d.enableBeforeSeparators:T,z=e.beforeSeparatorLength,D=void 0===z?d.beforeSeparatorLength:z,V=e.beforeSeparatorOffset,H=void 0===V?d.beforeSeparatorOffset:V,R=e.enableAfterSeparators,_=void 0===R?d.enableAfterSeparators:R,J=e.afterSeparatorLength,K=void 0===J?d.afterSeparatorLength:J,N=e.afterSeparatorOffset,Q=void 0===N?d.afterSeparatorOffset:N,U=e.isInteractive,X=void 0===U?d.isInteractive:U,Y=e.currentPartSizeExtension,Z=void 0===Y?d.currentPartSizeExtension:Y,$=e.currentBorderWidth,ee=e.onMouseEnter,re=e.onMouseMove,te=e.onMouseLeave,oe=e.onClick,ne=e.tooltip,ae=t.useTheme(),ie=a.useOrdinalColorScale(j,"id"),se=a.useInheritedColor(W,ae),ue=a.useInheritedColor(k,ae),le=t.useValueFormatter(M),pe=r.useMemo((function(){return f(m,y)}),[m,y]),de=pe[0],ce=pe[1],fe=q?D+H:0,he=_?K+Q:0;"vertical"===y?(o=u-fe-he,n=l):(o=u,n=l-fe-he);var ve=r.useMemo((function(){return h({data:i,direction:y,width:o,height:n,spacing:S})}),[i,y,o,n,S]),xe=ve[0],ye=ve[1],be=r.useState(null),me=be[0],ge=be[1],Se=r.useMemo((function(){var e=i.map((function(e,r){var t,a,i,s,u=e.id===me;"vertical"===y?(t=ye(e.value),a=xe.bandwidth,s=fe+.5*(o-t),i=xe(r)):(t=xe.bandwidth,a=ye(e.value),s=xe(r),i=fe+.5*(n-a));var l=s+t,p=s+.5*t,d=i+a,c=i+.5*a,f={data:e,width:t,height:a,color:ie(e),fillOpacity:I,borderWidth:u&&void 0!==$?$:B,borderOpacity:G,formattedValue:le(e.value),isCurrent:u,x:p,x0:s,x1:l,y:c,y0:i,y1:d,borderColor:"",labelColor:"",points:[],areaPoints:[],borderPoints:[]};return f.borderColor=se(f),f.labelColor=ue(f),f})),r=P/2;return e.forEach((function(t,o){var n=e[o+1];if("vertical"===y){t.points.push({x:t.x0,y:t.y0}),t.points.push({x:t.x1,y:t.y0}),n?(t.points.push({x:n.x1,y:t.y1}),t.points.push({x:n.x0,y:t.y1})):(t.points.push({x:t.points[1].x,y:t.y1}),t.points.push({x:t.points[0].x,y:t.y1})),t.isCurrent&&(t.points[0].x-=Z,t.points[1].x+=Z,t.points[2].x+=Z,t.points[3].x-=Z),t.areaPoints=[{x:0,x0:t.points[0].x,x1:t.points[1].x,y:t.y0,y0:0,y1:0}],t.areaPoints.push(p({},t.areaPoints[0],{y:t.y0+t.height*r}));var a={x:0,x0:t.points[3].x,x1:t.points[2].x,y:t.y1,y0:0,y1:0};t.areaPoints.push(p({},a,{y:t.y1-t.height*r})),t.areaPoints.push(a),[0,1,2,3].map((function(e){t.borderPoints.push({x:t.areaPoints[e].x0,y:t.areaPoints[e].y})})),t.borderPoints.push(null),[3,2,1,0].map((function(e){t.borderPoints.push({x:t.areaPoints[e].x1,y:t.areaPoints[e].y})}))}else{t.points.push({x:t.x0,y:t.y0}),n?(t.points.push({x:t.x1,y:n.y0}),t.points.push({x:t.x1,y:n.y1})):(t.points.push({x:t.x1,y:t.y0}),t.points.push({x:t.x1,y:t.y1})),t.points.push({x:t.x0,y:t.y1}),t.isCurrent&&(t.points[0].y-=Z,t.points[1].y-=Z,t.points[2].y+=Z,t.points[3].y+=Z),t.areaPoints=[{x:t.x0,x0:0,x1:0,y:0,y0:t.points[0].y,y1:t.points[3].y}],t.areaPoints.push(p({},t.areaPoints[0],{x:t.x0+t.width*r}));var i={x:t.x1,x0:0,x1:0,y:0,y0:t.points[1].y,y1:t.points[2].y};t.areaPoints.push(p({},i,{x:t.x1-t.width*r})),t.areaPoints.push(i),[0,1,2,3].map((function(e){t.borderPoints.push({x:t.areaPoints[e].x,y:t.areaPoints[e].y0})})),t.borderPoints.push(null),[3,2,1,0].map((function(e){t.borderPoints.push({x:t.areaPoints[e].x,y:t.areaPoints[e].y1})}))}})),e}),[i,y,ye,xe,o,n,fe,he,P,ie,le,se,ue,me]),Ce=s.useTooltip(),Pe=Ce.showTooltipFromEvent,Me=Ce.hideTooltip,Oe=r.useMemo((function(){return x({parts:Se,setCurrentPartId:ge,isInteractive:X,onMouseEnter:ee,onMouseLeave:te,onMouseMove:re,onClick:oe,showTooltipFromEvent:Pe,hideTooltip:Me,tooltip:ne})}),[Se,ge,X,ee,te,re,oe,Pe,Me,ne]),je=r.useMemo((function(){return v({parts:Se,direction:y,width:u,height:l,spacing:S,enableBeforeSeparators:q,beforeSeparatorOffset:H,enableAfterSeparators:_,afterSeparatorOffset:Q})}),[Se,y,u,l,S,q,H,_,Q]),Le=je[0],Ie=je[1],we=r.useMemo((function(){return{width:u,height:l,parts:Oe,areaGenerator:de,borderGenerator:ce,beforeSeparators:Le,afterSeparators:Ie,setCurrentPartId:ge}}),[u,l,Oe,de,ce,Le,Ie,ge]);return{parts:Oe,areaGenerator:de,borderGenerator:ce,beforeSeparators:Le,afterSeparators:Ie,setCurrentPartId:ge,currentPartId:me,customLayerProps:we}},b=function(e,r){return i.useAnnotations({data:e,annotations:r,getPosition:function(e){return{x:e.x,y:e.y}},getDimensions:function(e){var r=e.width,t=e.height;return{size:Math.max(r,t),width:r,height:t}}})},m=function(e){var r=e.part,o=e.areaGenerator,n=e.borderGenerator,a=t.useMotionConfig(),i=a.animate,s=a.config,p=t.useAnimatedPath(o(r.areaPoints)),d=t.useAnimatedPath(n(r.borderPoints)),c=l.useSpring({areaColor:r.color,borderWidth:r.borderWidth,borderColor:r.borderColor,config:s,immediate:!i});return u.jsxs(u.Fragment,{children:[r.borderWidth>0&&u.jsx(l.animated.path,{d:d,stroke:c.borderColor,strokeWidth:c.borderWidth,strokeOpacity:r.borderOpacity,fill:"none"}),u.jsx(l.animated.path,{d:p,fill:c.areaColor,fillOpacity:r.fillOpacity,onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave,onMouseMove:r.onMouseMove,onClick:r.onClick})]})},g=function(e){var r=e.parts,t=e.areaGenerator,o=e.borderGenerator;return u.jsx(u.Fragment,{children:r.map((function(e){return u.jsx(m,{part:e,areaGenerator:t,borderGenerator:o},e.data.id)}))})},S=function(e){var r=e.part,o=t.useTheme(),n=t.useMotionConfig(),a=n.animate,i=n.config,s=l.useSpring({transform:"translate("+r.x+", "+r.y+")",color:r.labelColor,config:i,immediate:!a});return u.jsx(l.animated.g,{transform:s.transform,children:u.jsx(l.animated.text,{textAnchor:"middle",dominantBaseline:"central",style:p({},o.labels.text,{fill:s.color,pointerEvents:"none"}),children:r.formattedValue})})},C=function(e){var r=e.parts;return u.jsx(u.Fragment,{children:r.map((function(e){return u.jsx(S,{part:e},e.data.id)}))})},P=function(e){var r=e.separator,o=t.useTheme(),n=t.useMotionConfig(),a=n.animate,i=n.config,s=l.useSpring({x1:r.x0,x2:r.x1,y1:r.y0,y2:r.y1,config:i,immediate:!a});return u.jsx(l.animated.line,p({x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2,fill:"none"},o.grid.line))},M=function(e){var r=e.beforeSeparators,t=e.afterSeparators;return u.jsxs(u.Fragment,{children:[r.map((function(e){return u.jsx(P,{separator:e},e.partId)})),t.map((function(e){return u.jsx(P,{separator:e},e.partId)}))]})},O=function(e){var r=e.parts,t=e.annotations,o=b(r,t);return u.jsx(u.Fragment,{children:o.map((function(e,r){return u.jsx(i.Annotation,p({},e),r)}))})},j=["isInteractive","animate","motionConfig","theme","renderWrapper"],L=function(e){var o=e.data,n=e.width,a=e.height,i=e.margin,s=e.direction,l=void 0===s?d.direction:s,p=e.interpolation,c=void 0===p?d.interpolation:p,f=e.spacing,h=void 0===f?d.spacing:f,v=e.shapeBlending,x=void 0===v?d.shapeBlending:v,b=e.valueFormat,m=e.colors,S=void 0===m?d.colors:m,P=e.fillOpacity,j=void 0===P?d.fillOpacity:P,L=e.borderWidth,I=void 0===L?d.borderWidth:L,w=e.borderColor,B=void 0===w?d.borderColor:w,E=e.borderOpacity,W=void 0===E?d.borderOpacity:E,F=e.enableLabel,G=void 0===F?d.enableLabel:F,A=e.labelColor,k=void 0===A?d.labelColor:A,T=e.enableBeforeSeparators,q=void 0===T?d.enableBeforeSeparators:T,z=e.beforeSeparatorLength,D=void 0===z?d.beforeSeparatorLength:z,V=e.beforeSeparatorOffset,H=void 0===V?d.beforeSeparatorOffset:V,R=e.enableAfterSeparators,_=void 0===R?d.enableAfterSeparators:R,J=e.afterSeparatorLength,K=void 0===J?d.afterSeparatorLength:J,N=e.afterSeparatorOffset,Q=void 0===N?d.afterSeparatorOffset:N,U=e.layers,X=void 0===U?d.layers:U,Y=e.annotations,Z=void 0===Y?d.annotations:Y,$=e.isInteractive,ee=void 0===$?d.isInteractive:$,re=e.currentPartSizeExtension,te=void 0===re?d.currentPartSizeExtension:re,oe=e.currentBorderWidth,ne=e.onMouseEnter,ae=e.onMouseMove,ie=e.onMouseLeave,se=e.onClick,ue=e.tooltip,le=e.role,pe=void 0===le?d.role:le,de=e.ariaLabel,ce=e.ariaLabelledBy,fe=e.ariaDescribedBy,he=t.useDimensions(n,a,i),ve=he.margin,xe=he.innerWidth,ye=he.innerHeight,be=he.outerWidth,me=he.outerHeight,ge=y({data:o,width:xe,height:ye,direction:l,interpolation:c,spacing:h,shapeBlending:x,valueFormat:b,colors:S,fillOpacity:j,borderWidth:I,borderColor:B,borderOpacity:W,labelColor:k,enableBeforeSeparators:q,beforeSeparatorLength:D,beforeSeparatorOffset:H,enableAfterSeparators:_,afterSeparatorLength:K,afterSeparatorOffset:Q,isInteractive:ee,currentPartSizeExtension:te,currentBorderWidth:oe,onMouseEnter:ne,onMouseMove:ae,onMouseLeave:ie,onClick:se,tooltip:ue}),Se=ge.areaGenerator,Ce=ge.borderGenerator,Pe=ge.parts,Me=ge.beforeSeparators,Oe=ge.afterSeparators,je=ge.customLayerProps,Le={separators:null,parts:null,annotations:null,labels:null};return X.includes("separators")&&(Le.separators=u.jsx(M,{beforeSeparators:Me,afterSeparators:Oe},"separators")),X.includes("parts")&&(Le.parts=u.jsx(g,{parts:Pe,areaGenerator:Se,borderGenerator:Ce},"parts")),null!=X&&X.includes("annotations")&&(Le.annotations=u.jsx(O,{parts:Pe,annotations:Z},"annotations")),X.includes("labels")&&G&&(Le.labels=u.jsx(C,{parts:Pe},"labels")),u.jsx(t.SvgWrapper,{width:be,height:me,margin:ve,role:pe,ariaLabel:de,ariaLabelledBy:ce,ariaDescribedBy:fe,children:X.map((function(e,t){var o;return"function"==typeof e?u.jsx(r.Fragment,{children:r.createElement(e,je)},t):null!=(o=null==Le?void 0:Le[e])?o:null}))})},I=function(e){var r=e.isInteractive,o=void 0===r?d.isInteractive:r,n=e.animate,a=void 0===n?d.animate:n,i=e.motionConfig,s=void 0===i?d.motionConfig:i,l=e.theme,c=e.renderWrapper,f=function(e,r){if(null==e)return{};var t,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,j);return u.jsx(t.Container,{animate:a,isInteractive:o,motionConfig:s,renderWrapper:c,theme:l,children:u.jsx(L,p({isInteractive:o},f))})};e.Funnel=I,e.ResponsiveFunnel=function(e){return u.jsx(t.ResponsiveWrapper,{children:function(r){var t=r.width,o=r.height;return u.jsx(I,p({width:t,height:o},e))}})},e.computePartsHandlers=x,e.computeScales=h,e.computeSeparators=v,e.computeShapeGenerators=f,e.svgDefaultProps=d,e.useFunnel=y,e.useFunnelAnnotations=b,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=nivo-funnel.umd.js.map
