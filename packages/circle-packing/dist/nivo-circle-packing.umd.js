!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("react"),require("@nivo/core"),require("d3-hierarchy"),require("lodash/cloneDeep"),require("lodash/sortBy"),require("@nivo/colors"),require("@nivo/tooltip"),require("react/jsx-runtime"),require("@react-spring/web")):"function"==typeof define&&define.amd?define(["exports","react","@nivo/core","d3-hierarchy","lodash/cloneDeep","lodash/sortBy","@nivo/colors","@nivo/tooltip","react/jsx-runtime","@react-spring/web"],o):o((e="undefined"!=typeof globalThis?globalThis:e||self).nivo=e.nivo||{},e.React,e.nivo,e.d3,e["lodash/cloneDeep"],e["lodash/sortBy"],e.nivo,e.nivo,e["react/jsx-runtime"],e["@react-spring/web"])}(this,(function(e,o,r,n,i,t,l,a,d,u){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var o=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(o,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),o.default=e,Object.freeze(o)}var v=c(o),f=s(i),h=s(t);function p(){return p=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}function m(e,o){if(null==e)return{};var r,n,i={},t=Object.keys(e);for(n=0;n<t.length;n++)r=t[n],o.indexOf(r)>=0||(i[r]=e[r]);return i}var b,C=function(e){var o,i=e.data,t=e.id,a=e.value,d=e.valueFormat,u=e.width,s=e.height,c=e.padding,v=e.leavesOnly,p=e.colors,m=e.colorBy,b=e.inheritColorFromParent,C=e.childColor,y=r.usePropertyAccessor(t),x=r.usePropertyAccessor(a),g=r.useValueFormatter(d),M=l.useOrdinalColorScale(p,m),k=r.useTheme(),j=l.useInheritedColor(C,k),E=f.default(i),P=n.hierarchy(E).sum(x),w=n.pack().size([u,s]).padding(c)(P),I=v?w.leaves():w.descendants(),F=h.default(I,"depth"),W=null!=(o=P.value)?o:0,R=F.reduce((function(e,o){var r,n=y(o.data),i=o.value,t=100*i/W,l=o.ancestors().map((function(e){return y(e.data)}));o.parent&&(r=e.find((function(e){return e.id===y(o.parent.data)})));var a={id:n,path:l,value:i,percentage:t,formattedValue:d?g(i):t.toFixed(2)+"%",x:o.x,y:o.y,radius:o.r,color:"",data:o.data,depth:o.depth,height:o.height};return b&&r&&a.depth>1?a.color=j(r):a.color=M(a),[].concat(e,[a])}),[]);return R},y=function(e,r,n,i){return o.useMemo((function(){if(!r)return e;var o=e.find((function(e){return e.id===r}));if(!o)return e;var t=Math.min(n,i)/(2*o.radius),l=n/2-o.x*t,a=i/2-o.y*t;return e.map((function(e){return p({},e,{x:e.x*t+l,y:e.y*t+a,radius:e.radius*t})}))}),[e,r,n,i])},x=function(e){var n=e.nodes,i=e.label,t=e.filter,a=e.skipRadius,d=e.textColor,u=r.usePropertyAccessor(i),s=r.useTheme(),c=l.useInheritedColor(d,s),v=o.useMemo((function(){return n.filter((function(e){return e.radius>=a})).map((function(e){return{label:u(e),textColor:c(e),node:e}}))}),[n,a,u,c]);return o.useMemo((function(){return t?v.filter(t):v}),[v,t])},g=function(e,r){var n=r.onMouseEnter,i=r.onMouseMove,t=r.onMouseLeave,l=r.onClick;return o.useMemo((function(){return{onMouseEnter:n?function(o){n(e,o)}:void 0,onMouseMove:i?function(o){i(e,o)}:void 0,onMouseLeave:t?function(o){t(e,o)}:void 0,onClick:l?function(o){l(e,o)}:void 0}}),[e,n,i,t,l])},M=function(e){var n=e.nodes,i=e.canvasEl,t=e.margin,l=o.useMemo((function(){return h.default(n,"height")}),[n]);return o.useCallback((function(e){if(!i.current)return null;var o=r.getRelativeCursor(i.current,e),n=o[0],a=o[1];return l.find((function(e){return r.getDistance(e.x,e.y,n-t.left,a-t.top)<=e.radius}))}),[i,t,l])},k=function(e){var r=e.nodes;return o.useMemo((function(){return{nodes:r}}),[r])},j={id:"id",value:"value",padding:0,leavesOnly:!1,layers:["circles","labels"],colors:{scheme:"nivo"},colorBy:"depth",inheritColorFromParent:!1,childColor:{from:"color",modifiers:[["darker",.3]]},borderWidth:0,borderColor:{from:"color",modifiers:[["darker",.3]]},defs:[],fill:[],enableLabels:!1,label:"id",labelTextColor:{from:"color",modifiers:[["darker",1.6]]},labelsSkipRadius:8,isInteractive:!0,tooltip:function(e){var o=e.id,r=e.formattedValue,n=e.color;return d.jsx(a.BasicTooltip,{id:o,value:r,enableChip:!0,color:n})},animate:!0,motionConfig:"gentle",role:"img",pixelRatio:"undefined"!=typeof window&&null!=(b=window.devicePixelRatio)?b:1},E=function(e){return u.to([e],(function(e){return Math.max(0,e)}))},P=function(e){var n=e.nodes,i=e.borderWidth,t=e.borderColor,s=e.component,c=e.isInteractive,f=e.onMouseEnter,h=e.onMouseMove,m=e.onMouseLeave,b=e.onClick,C=e.tooltip,y=a.useTooltip(),x=y.showTooltipFromEvent,g=y.hideTooltip,M=o.useMemo((function(){if(c)return function(e,r){x(o.createElement(C,e),r),null==f||f(e,r)}}),[c,x,C,f]),k=o.useMemo((function(){if(c)return function(e,r){x(o.createElement(C,e),r),null==h||h(e,r)}}),[c,x,C,h]),j=o.useMemo((function(){if(c)return function(e,o){g(),null==m||m(e,o)}}),[c,g,m]),P=o.useMemo((function(){if(c)return function(e,o){null==b||b(e,o)}}),[c,b]),w=r.useMotionConfig(),I=w.animate,F=w.config,W=r.useTheme(),R=l.useInheritedColor(t,W),L=o.useMemo((function(){return function(e){return{enter:function(o){return{x:o.x,y:o.y,radius:0,color:o.color,borderColor:e(o),opacity:0}},update:function(o){return{x:o.x,y:o.y,radius:o.radius,color:o.color,borderColor:e(o),opacity:1}},leave:function(o){return{x:o.x,y:o.y,radius:0,color:o.color,borderColor:e(o),opacity:0}}}}(R)}),[R]),T=u.useTransition(n,{keys:function(e){return e.id},initial:L.update,from:L.enter,enter:L.update,update:L.update,leave:L.leave,config:F,immediate:!I});return d.jsx(d.Fragment,{children:T((function(e,o){return v.createElement(s,{key:o.id,node:o,style:p({},e,{radius:E(e.radius),borderWidth:i}),onMouseEnter:M,onMouseMove:k,onMouseLeave:j,onClick:P})}))})},w=function(e){var o=e.node,r=e.style,n=e.onMouseEnter,i=e.onMouseMove,t=e.onMouseLeave,l=e.onClick,a=g(o,{onMouseEnter:n,onMouseMove:i,onMouseLeave:t,onClick:l});return d.jsx(u.animated.circle,{cx:r.x,cy:r.y,r:r.radius,fill:o.fill||r.color,stroke:r.borderColor,strokeWidth:r.borderWidth,opacity:r.opacity,onMouseEnter:a.onMouseEnter,onMouseMove:a.onMouseMove,onMouseLeave:a.onMouseLeave,onClick:a.onClick},o.id)},I=function(e){var n=e.nodes,i=e.label,t=e.filter,l=e.skipRadius,a=e.textColor,s=e.component,c=r.useMotionConfig(),v=c.animate,f=c.config,h=x({nodes:n,label:i,filter:t,skipRadius:l,textColor:a}),m=o.useMemo((function(){return{enter:function(e){return{x:e.node.x,y:e.node.y,radius:e.node.radius,textColor:e.textColor,opacity:0}},update:function(e){return{x:e.node.x,y:e.node.y,radius:e.node.radius,textColor:e.textColor,opacity:1}},leave:function(e){return{x:e.node.x,y:e.node.y,radius:e.node.radius,textColor:e.textColor,opacity:0}}}}),[]),b=u.useTransition(h,{keys:function(e){return e.node.id},initial:m.update,from:m.enter,enter:m.update,update:m.update,leave:m.leave,config:f,immediate:!v});return d.jsx(d.Fragment,{children:b((function(e,r){return o.createElement(s,{key:r.node.id,label:r.label,style:p({},e,{radius:E(e.radius)}),node:r.node})}))})},F=function(e){var o=e.node,n=e.label,i=e.style,t=r.useTheme();return d.jsx(u.animated.text,{x:i.x,y:i.y,textAnchor:"middle",dominantBaseline:"central",style:p({},t.labels.text,{fill:i.textColor,opacity:i.opacity,pointerEvents:"none"}),children:n},o.id)},W=["theme","isInteractive","animate","motionConfig","renderWrapper"],R=function(e){var n=e.data,i=e.id,t=void 0===i?j.id:i,l=e.value,a=void 0===l?j.value:l,u=e.valueFormat,s=e.width,c=e.height,v=e.margin,f=e.padding,h=void 0===f?j.padding:f,p=e.leavesOnly,m=void 0===p?j.leavesOnly:p,b=e.colors,x=void 0===b?j.colors:b,g=e.colorBy,M=void 0===g?j.colorBy:g,E=e.inheritColorFromParent,W=void 0===E?j.inheritColorFromParent:E,R=e.childColor,L=void 0===R?j.childColor:R,T=e.borderWidth,O=void 0===T?j.borderWidth:T,B=e.borderColor,S=void 0===B?j.borderColor:B,D=e.circleComponent,H=void 0===D?w:D,q=e.defs,z=void 0===q?j.defs:q,A=e.fill,_=void 0===A?j.fill:A,V=e.enableLabels,K=void 0===V?j.enableLabels:V,N=e.label,Z=void 0===N?j.label:N,G=e.labelsFilter,J=e.labelsSkipRadius,Q=void 0===J?j.labelsSkipRadius:J,U=e.labelTextColor,X=void 0===U?j.labelTextColor:U,Y=e.labelComponent,$=void 0===Y?F:Y,ee=e.layers,oe=void 0===ee?j.layers:ee,re=e.isInteractive,ne=e.onMouseEnter,ie=e.onMouseMove,te=e.onMouseLeave,le=e.onClick,ae=e.tooltip,de=void 0===ae?j.tooltip:ae,ue=e.zoomedId,se=e.role,ce=void 0===se?j.role:se,ve=r.useDimensions(s,c,v),fe=ve.outerWidth,he=ve.outerHeight,pe=ve.margin,me=ve.innerWidth,be=ve.innerHeight,Ce=C({data:n,id:t,value:a,valueFormat:u,width:me,height:be,padding:h,leavesOnly:m,colors:x,colorBy:M,inheritColorFromParent:W,childColor:L}),ye=y(Ce,ue,me,be),xe=o.useMemo((function(){return r.bindDefs(z,ye,_,{targetKey:"fill"})}),[z,ye,_]),ge={circles:null,labels:null};oe.includes("circles")&&(ge.circles=d.jsx(P,{nodes:ye,borderWidth:O,borderColor:S,isInteractive:re,onMouseEnter:ne,onMouseMove:ie,onMouseLeave:te,onClick:le,component:H,tooltip:de},"circles")),K&&oe.includes("labels")&&(ge.labels=d.jsx(I,{nodes:ye,label:Z,filter:G,skipRadius:Q,textColor:X,component:$},"labels"));var Me=k({nodes:Ce});return d.jsx(r.SvgWrapper,{width:fe,height:he,margin:pe,defs:xe,role:ce,children:oe.map((function(e,r){return void 0!==ge[e]?ge[e]:"function"==typeof e?d.jsx(o.Fragment,{children:o.createElement(e,Me)},r):null}))})},L=function(e){var o=e.theme,n=e.isInteractive,i=void 0===n?j.isInteractive:n,t=e.animate,l=void 0===t?j.animate:t,a=e.motionConfig,u=void 0===a?j.motionConfig:a,s=e.renderWrapper,c=m(e,W);return d.jsx(r.Container,{isInteractive:i,animate:l,motionConfig:u,renderWrapper:s,theme:o,children:d.jsx(R,p({isInteractive:i},c))})},T=function(e,o){return u.to([e,o],(function(e,o){return e-o}))},O=function(e){return u.to([e],(function(e){return 2*e}))},B=function(e){var o,r,n=e.node,i=e.style,t=e.onMouseEnter,l=e.onMouseMove,a=e.onMouseLeave,s=e.onClick,c=O(i.radius),v=g(n,{onMouseEnter:t,onMouseMove:l,onMouseLeave:a,onClick:s});return d.jsx(u.animated.div,{style:{position:"absolute",top:T(i.y,i.radius),left:T(i.x,i.radius),height:c,width:c,borderRadius:i.radius,backgroundColor:i.color,borderWidth:(o=i.borderWidth,r=i.radius,u.to([r],(function(e){return Math.min(o,e)}))),borderStyle:"solid",borderColor:i.borderColor,boxSizing:"border-box"},onMouseEnter:v.onMouseEnter,onMouseMove:v.onMouseMove,onMouseLeave:v.onMouseLeave,onClick:v.onClick})},S=function(e){var o=e.node,n=e.label,i=e.style,t=r.useTheme(),l=O(i.radius);return d.jsx(u.animated.div,{style:p({},t.labels.text,{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:T(i.y,i.radius),left:T(i.x,i.radius),width:l,height:l,color:i.textColor,opacity:i.opacity,pointerEvents:"none"}),children:n},o.id)},D=["theme","isInteractive","animate","motionConfig"],H=function(e){var n=e.data,i=e.id,t=void 0===i?j.id:i,l=e.value,a=void 0===l?j.value:l,u=e.valueFormat,s=e.width,c=e.height,v=e.margin,f=e.padding,h=void 0===f?j.padding:f,p=e.leavesOnly,m=void 0===p?j.leavesOnly:p,b=e.colors,x=void 0===b?j.colors:b,g=e.colorBy,M=void 0===g?j.colorBy:g,E=e.inheritColorFromParent,w=void 0===E?j.inheritColorFromParent:E,F=e.childColor,W=void 0===F?j.childColor:F,R=e.borderWidth,L=void 0===R?j.borderWidth:R,T=e.borderColor,O=void 0===T?j.borderColor:T,D=e.circleComponent,H=void 0===D?B:D,q=e.enableLabels,z=void 0===q?j.enableLabels:q,A=e.label,_=void 0===A?j.label:A,V=e.labelsFilter,K=e.labelsSkipRadius,N=void 0===K?j.labelsSkipRadius:K,Z=e.labelTextColor,G=void 0===Z?j.labelTextColor:Z,J=e.labelComponent,Q=void 0===J?S:J,U=e.layers,X=void 0===U?j.layers:U,Y=e.isInteractive,$=e.onMouseEnter,ee=e.onMouseMove,oe=e.onMouseLeave,re=e.onClick,ne=e.tooltip,ie=void 0===ne?j.tooltip:ne,te=e.zoomedId,le=e.role,ae=void 0===le?j.role:le,de=r.useDimensions(s,c,v),ue=de.outerWidth,se=de.outerHeight,ce=de.margin,ve=de.innerWidth,fe=de.innerHeight,he=C({data:n,id:t,value:a,valueFormat:u,width:ve,height:fe,padding:h,leavesOnly:m,colors:x,colorBy:M,inheritColorFromParent:w,childColor:W}),pe=y(he,te,ve,fe),me={circles:null,labels:null};X.includes("circles")&&(me.circles=d.jsx(P,{nodes:pe,borderWidth:L,borderColor:O,isInteractive:Y,onMouseEnter:$,onMouseMove:ee,onMouseLeave:oe,onClick:re,component:H,tooltip:ie},"circles")),z&&X.includes("labels")&&(me.labels=d.jsx(I,{nodes:pe,label:_,filter:V,skipRadius:N,textColor:G,component:Q},"labels"));var be=k({nodes:he});return d.jsx("div",{role:ae,style:{position:"relative",overflow:"hidden",width:ue,height:se},children:d.jsx("div",{style:{position:"absolute",top:ce.top,left:ce.left},children:X.map((function(e,r){return void 0!==me[e]?me[e]:"function"==typeof e?d.jsx(o.Fragment,{children:o.createElement(e,be)},r):null}))})})},q=function(e){var o=e.theme,n=e.isInteractive,i=void 0===n?j.isInteractive:n,t=e.animate,l=void 0===t?j.animate:t,a=e.motionConfig,u=void 0===a?j.motionConfig:a,s=m(e,D);return d.jsx(r.Container,{isInteractive:i,animate:l,motionConfig:u,theme:o,children:d.jsx(H,p({isInteractive:i},s))})},z=["isInteractive","theme"],A=function(e){var n=e.data,i=e.id,t=void 0===i?j.id:i,u=e.value,s=void 0===u?j.value:u,c=e.valueFormat,v=e.width,f=e.height,h=e.margin,p=e.padding,m=void 0===p?j.padding:p,b=e.leavesOnly,g=void 0===b?j.leavesOnly:b,k=e.colors,E=void 0===k?j.colors:k,P=e.colorBy,w=void 0===P?j.colorBy:P,I=e.inheritColorFromParent,F=void 0===I?j.inheritColorFromParent:I,W=e.childColor,R=void 0===W?j.childColor:W,L=e.borderWidth,T=void 0===L?j.borderWidth:L,O=e.borderColor,B=void 0===O?j.borderColor:O,S=e.enableLabels,D=void 0===S?j.enableLabels:S,H=e.label,q=void 0===H?j.label:H,z=e.labelsFilter,A=e.labelsSkipRadius,_=void 0===A?j.labelsSkipRadius:A,V=e.labelTextColor,K=void 0===V?j.labelTextColor:V,N=e.isInteractive,Z=e.onMouseMove,G=e.onClick,J=e.tooltip,Q=void 0===J?j.tooltip:J,U=e.zoomedId,X=e.role,Y=void 0===X?j.role:X,$=e.pixelRatio,ee=void 0===$?j.pixelRatio:$,oe=o.useRef(null),re=r.useTheme(),ne=r.useDimensions(v,f,h),ie=ne.margin,te=ne.innerWidth,le=ne.innerHeight,ae=ne.outerWidth,de=ne.outerHeight,ue=C({data:n,id:t,value:s,valueFormat:c,width:te,height:le,padding:m,leavesOnly:g,colors:E,colorBy:w,inheritColorFromParent:F,childColor:R}),se=y(ue,U,te,le),ce=x({nodes:se,label:q,filter:z,skipRadius:_,textColor:K}),ve=l.useInheritedColor(B,re);o.useEffect((function(){if(oe.current){oe.current.width=ae*ee,oe.current.height=de*ee;var e=oe.current.getContext("2d");e.scale(ee,ee),e.fillStyle=re.background,e.fillRect(0,0,ae,de),e.save(),e.translate(ie.left,ie.top),se.forEach((function(o){T>0&&(e.strokeStyle=ve(o),e.lineWidth=T),e.beginPath(),e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.fillStyle=o.color,e.fill(),T>0&&e.stroke()})),D&&(e.textAlign="center",e.textBaseline="middle",e.font=re.labels.text.fontSize+"px "+re.labels.text.fontFamily,ce.forEach((function(o){e.fillStyle=o.textColor,e.fillText(""+o.label,o.node.x,o.node.y)})))}}),[oe,te,le,ae,de,ie.top,ie.left,re,ee,se,D,ce,T,ve]);var fe=M({nodes:se,canvasEl:oe,margin:ie}),he=a.useTooltip(),pe=he.showTooltipFromEvent,me=he.hideTooltip,be=o.useCallback((function(e){var r=fe(e);r?(null==Z||Z(r,e),pe(o.createElement(Q,r),e)):me()}),[fe,pe,Q,me]),Ce=o.useCallback((function(){me()}),[me]),ye=o.useCallback((function(e){if(G){var o=fe(e);o&&G(o,e)}}),[fe,G]);return d.jsx("canvas",{ref:oe,width:ae*ee,height:de*ee,style:{width:ae,height:de,cursor:N?"auto":"normal"},role:Y,onMouseEnter:N?be:void 0,onMouseMove:N?be:void 0,onMouseLeave:N?Ce:void 0,onClick:N?ye:void 0})},_=function(e){var o=e.isInteractive,n=void 0===o?j.isInteractive:o,i=e.theme,t=m(e,z);return d.jsx(r.Container,{isInteractive:n,theme:i,children:d.jsx(A,p({isInteractive:n},t))})};e.CirclePacking=L,e.CirclePackingCanvas=_,e.CirclePackingHtml=q,e.InnerCirclePackingHtml=H,e.ResponsiveCirclePacking=function(e){return d.jsx(r.ResponsiveWrapper,{children:function(o){var r=o.width,n=o.height;return d.jsx(L,p({width:r,height:n},e))}})},e.ResponsiveCirclePackingCanvas=function(e){return d.jsx(r.ResponsiveWrapper,{children:function(o){var r=o.width,n=o.height;return d.jsx(_,p({width:r,height:n},e))}})},e.ResponsiveCirclePackingHtml=function(e){return d.jsx(r.ResponsiveWrapper,{children:function(o){var r=o.width,n=o.height;return d.jsx(q,p({width:r,height:n},e))}})},e.defaultProps=j,e.useCirclePacking=C,e.useCirclePackingLabels=x,e.useCirclePackingLayerContext=k,e.useCirclePackingZoom=y,e.useMouseCircleDetection=M,e.useNodeMouseHandlers=g,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=nivo-circle-packing.umd.js.map
